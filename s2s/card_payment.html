<!DOCTYPE html>
<html lang="en">

<head>
    <script src="../assets/js/config.js?v=1.0.9.10"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="https://eximpe.com/EximPe.webp">
    <title>Create S2S Card Payment</title>
    <link rel="stylesheet" href="../assets/css/fontawesome-all.min.css?v=1.0.9.10">
    <link rel="stylesheet" href="../assets/css/card_payment.css?v=1.0.9.10">
    <style>
        /* Sidebar Input Styles */
        .summary-input-group {
            margin-bottom: 16px;
        }

        .summary-input-group label {
            display: block;
            font-size: 12px;
            color: #94a3b8;
            margin-bottom: 4px;
            font-weight: 500;
        }

        .summary-input {
            width: 100%;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            padding: 8px 12px;
            color: #fff;
            font-size: 14px;
            font-family: inherit;
            transition: all 0.2s;
        }

        .summary-input:focus {
            outline: none;
            border-color: #26a887;
            background: rgba(255, 255, 255, 0.1);
        }

        .summary-input::placeholder {
            color: #475569;
        }
    </style>
</head>

<body>
    <!-- Modal injected by common-utils.js -->


    <!-- Saved Cards Container (Inline) -->
    <!-- Removed modal -->

    <div class="checkout-container">
        <!-- Left Sidebar: Order Summary -->
        <div class="checkout-summary">
            <div class="summary-header">
                <div class="logo-circle-small">
                    <svg width="24" height="24" viewBox="0 0 28 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M27.9766 0.193437L17.3616 11.8518L11.7609 6.4086H3.9584L13.6276 15.9528L13.3281 16.2817L13.3304 16.2842L3.90483 25.5879H11.7073L17.1227 20.3249L27.9225 31.8322C27.6855 31.94 27.4222 32 27.1448 32H1.88167C0.84245 32 0 31.1572 0 30.1176V1.88235C0 0.84276 0.842452 0 1.88167 0H27.1448C27.4434 0 27.7258 0.0695875 27.9766 0.193437Z"
                            fill="white" />
                    </svg>
                </div>
                <span class="brand-name">EximPe</span>
            </div>

            <div class="summary-content">
                <div class="summary-label">Total Amount</div>
                <div class="summary-amount">
                    <span class="currency" id="orderSummaryCurrency">INR</span>
                    <span class="amount" id="orderSummaryAmount">1.00</span>
                </div>

                <div class="summary-product">
                    <div class="p-icon">
                        <i class="fas fa-box-open"></i>
                    </div>
                    <div class="p-details">
                        <div class="p-name" id="orderSummaryProductName">Sample Product</div>
                        <div class="p-desc" id="orderSummaryProductDesc">This is a sample product description</div>
                    </div>
                </div>

                <div class="summary-divider"></div>
                <div class="summary-input-group">
                    <label for="buyerName">Buyer Name</label>
                    <input type="text" id="buyerName" name="buyer_name" form="sessionForm" class="summary-input"
                        placeholder="John Doe">
                </div>

                <div class="summary-input-group">
                    <label for="buyerEmail">Buyer Email</label>
                    <input type="email" id="buyerEmail" name="buyer_email" form="sessionForm" class="summary-input"
                        placeholder="john.doe@example.com">
                </div>
            </div>

            <div class="summary-footer">
                <i class="fas fa-shield-alt"></i>
                <span>Payments are secure and encrypted</span>
            </div>
        </div>

        <!-- Right Content: Payment Form -->
        <div class="checkout-payment">
            <div class="payment-header">
                <h2>Pay with Card</h2>
                <div class="payment-subtitle">Enter your credit or debit card details below.</div>
                <div class="card-icons">
                    <i class="fab fa-cc-visa"></i>
                    <i class="fab fa-cc-mastercard"></i>
                    <i class="fab fa-cc-amex"></i>
                    <i class="fab fa-cc-diners-club"></i>
                </div>
            </div>

            <form id="sessionForm" autocomplete="off">
                <div class="form-grid">
                    <!-- Card Number -->
                    <div class="form-group full-width tooltip">
                        <label>Card Number</label>
                        <div class="input-wrapper">
                            <input type="text" id="cardNumber" name="card_number" class="card-number-input"
                                placeholder="0000 0000 0000 0000" maxlength="19">
                            <i id="cardNumberIcon" class="fas fa-credit-card input-icon"></i>
                        </div>
                        <span class="tooltiptext"><strong>Card Number</strong><br>16-digit card number</span>
                    </div>

                    <!-- Card Holder Name -->
                    <div class="form-group full-width tooltip">
                        <label>Card Holder Name</label>
                        <div class="input-wrapper">
                            <input type="text" id="cardHolderName" name="card_holder_name"
                                placeholder="Name as on card">
                            <i class="fas fa-user input-icon"></i>
                        </div>
                        <span class="tooltiptext"><strong>Card Holder Name</strong><br>Name as on card</span>
                    </div>

                    <!-- Expiry Date -->
                    <div class="form-group tooltip">
                        <label>Expiry Date</label>
                        <div class="expiry-container" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                            <select id="expiryMonth" name="expiry_month">
                                <option value="">MM</option>
                                <option value="01">01</option>
                                <option value="02">02</option>
                                <option value="03">03</option>
                                <option value="04">04</option>
                                <option value="05">05</option>
                                <option value="06">06</option>
                                <option value="07">07</option>
                                <option value="08">08</option>
                                <option value="09">09</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                            </select>
                            <select id="expiryYear" name="expiry_year">
                                <option value="">YYYY</option>
                            </select>
                        </div>
                        <span class="tooltiptext"><strong>Expiry Date</strong><br>Card expiry month and year</span>
                    </div>

                    <!-- CVV -->
                    <div class="form-group tooltip" id="cvvField">
                        <label>CVV</label>
                        <div class="input-wrapper">
                            <input type="password" id="cvv" name="cvv" class="cvv-input" placeholder="123"
                                maxlength="4">
                            <i class="fas fa-lock input-icon"></i>
                        </div>
                        <span class="tooltiptext"><strong>CVV</strong><br>3 or 4 digit security code</span>
                    </div>

                    <!-- Card Nickname -->
                    <div class="form-group tooltip">
                        <label>Card Nickname</label>
                        <input type="text" id="cardNickname" name="card_nickname" placeholder="e.g. My Visa">
                        <span class="tooltiptext"><strong>Card Nickname</strong><br>Nickname for the card</span>
                    </div>

                    <!-- Card Type -->
                    <div class="form-group tooltip">
                        <label>Card Type</label>
                        <select id="cardType" name="card_type">
                            <option value="">Select Type</option>
                            <option value="credit_card">Credit Card</option>
                            <option value="debit_card">Debit Card</option>
                        </select>
                        <span class="tooltiptext"><strong>Card Type</strong><br>Credit or Debit</span>
                    </div>

                    <!-- Card Network -->
                    <div class="form-group tooltip">
                        <label>Card Network</label>
                        <select id="cardNetwork" name="card_network">
                            <option value="">Select Network</option>
                            <option value="visa">VISA</option>
                            <option value="mastercard">MASTERCARD</option>
                            <option value="maestro">MAESTRO</option>
                            <option value="sbi_maestro">SBI MAESTRO</option>
                            <option value="rupay">RUPAY</option>
                            <option value="amex">AMEX</option>
                            <option value="diners">DINERS</option>
                        </select>
                        <span class="tooltiptext"><strong>Card Network</strong><br>Select the card network</span>
                    </div>

                    <!-- Authorization Reference Number (for AMEX/RUPAY) -->
                    <div class="form-group tooltip" id="arnField" style="display:none;">
                        <label>Auth Ref Number</label>
                        <input type="text" id="authorizationRefNumber" name="authorization_reference_number"
                            placeholder="Required for AMEX/RUPAY">
                        <span class="tooltiptext"><strong>Authorization Reference Number</strong><br>Required for AMEX
                            and RUPAY networks.</span>
                    </div>

                    <!-- Card Identifier -->
                    <div class="form-group tooltip full-width">
                        <label>Card Identifier</label>
                        <div style="display: flex; gap: 12px;">
                            <div class="input-wrapper" style="flex: 1;">
                                <input type="text" id="cardIdentifier" name="card_identifier"
                                    placeholder="buyer_id, device_id, etc.">
                                <i class="fas fa-id-badge input-icon"></i>
                            </div>
                            <button type="button" id="searchSavedCardsBtn" class="main-action-btn outline-btn">
                                <i class="fas fa-search"></i> <span>List Cards</span>
                            </button>
                        </div>
                        <!-- Inline Saved Cards List -->
                        <div id="savedCardsContainer" style="display: none; margin-top: 16px;"></div>
                        <span class="tooltiptext"><strong>Card Identifier</strong><br>Unique identifier for the
                            card</span>
                        <div class="helper-text">Used for card tokenization and future reference.</div>
                    </div>

                    <!-- Save Card Checkbox -->
                    <div class="form-group full-width"
                        style="display: flex; align-items: center; gap: 10px; margin-top: 10px;">
                        <input type="checkbox" id="saveCard" style="width: auto; margin: 0;">
                        <label for="saveCard"
                            style="margin: 0; font-weight: 500; text-transform: none; color: #1e293b;">Save this card
                            for future payments</label>
                    </div>
                </div>

                <!-- Hidden Fields -->
                <input type="hidden" id="amount" name="amount">
                <input type="hidden" id="currency" name="currency">
                <input type="hidden" id="referenceId" name="reference_id">
                <input type="hidden" id="buyerPhone" name="buyer_phone">
                <input type="hidden" id="userIp" name="user_ip">
                <input type="hidden" id="userAgent" name="user_agent">
                <input type="hidden" id="buyerAddressLine1" name="buyer_address_line_1">
                <input type="hidden" id="buyerAddressLine2" name="buyer_address_line_2">
                <input type="hidden" id="buyerCity" name="buyer_city">
                <input type="hidden" id="buyerState" name="buyer_state">
                <input type="hidden" id="buyerPostalCode" name="buyer_postal_code">
                <input type="hidden" id="productName" name="product_name">
                <input type="hidden" id="typeOfGoods" name="type_of_goods">
                <input type="hidden" id="productDescription" name="product_description">
                <input type="hidden" id="hsCode" name="hs_code">
                <input type="hidden" id="hsCodeDescription" name="hs_code_description">
                <input type="hidden" id="invoiceNumber" name="invoice_number">
                <input type="hidden" id="invoiceDate" name="invoice_date">

                <button type="submit" id="createButton" class="main-action-btn">
                    <i class="fas fa-lock"></i>
                    <span id="btnText">Pay Securely</span>
                </button>
            </form>
        </div>
    </div>



    <!-- Common utilities -->
    <script src="../assets/js/trusted-types-policy.js?v=1.0.9.10"></script>
    <script src="../assets/js/common-utils.js?v=1.0.9.10"></script>

    <!-- Pass Django variables to JavaScript -->
    <script>
        window.API_URL = window.Config.API_URL;
    </script>

    <!-- Page-specific logic -->
    <script src="../assets/js/card_payment.js?v=1.0.9.10"></script>
</body>

</html>