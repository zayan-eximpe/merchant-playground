
<!DOCTYPE html>
<html lang="en">
<head>
    <script src="../assets/js/config.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="https://eximpe.com/EximPe.webp">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Create UPI Intent Request</title>
    <script>loadCSS("../assets/css/fontawesome-all.min.css");</script>
    <script>loadCSS("../assets/css/qr_payment.css");</script>
    
</head>
<body>
    <!-- Modal for error/success -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal" id="modalBox">
            <button class="modal-close" id="modalCloseBtn" aria-label="Close">&times;</button>
            <div class="modal-icon" id="modalIcon"></div>
            <div class="modal-title" id="modalTitle"></div>
            <div class="modal-message" id="modalMessage"></div>
        </div>
    </div>
    <div class="right-actions">
        <div class="help-block">
            <div class="help-block-title">
                <i class="fas fa-bolt"></i>
                Quick Actions
            </div>
            <a href="../index.html" class="header-button">
                <i class="fas fa-home"></i>
                Back to Home
            </a>
            <a href="#" data-action="create-sample-data" class="header-button">
                <i class="fas fa-magic"></i>
                Set Sample Data
            </a>
            <a href="#" data-action="clear-cache" class="header-button">
                <i class="fas fa-broom"></i>
                Clear Fields
            </a>
        </div>
    </div>

    <!-- Mobile Quick Actions -->
    <div class="mobile-overlay" id="mobileOverlay"></div>
    <div class="mobile-quick-actions">
        <button class="mobile-fab" id="mobileFab">
            <i class="fas fa-bolt"></i>
        </button>
        <div class="mobile-actions-menu" id="mobileActionsMenu">
            <button type="button" data-action="navigate-home" class="mobile-action-item">
                <i class="fas fa-home"></i>
                <span>Back to Home</span>
            </button>
            <button type="button" data-action="create-sample-data" class="mobile-action-item">
                <i class="fas fa-magic"></i>
                <span>Set Sample Data</span>
            </button>
            <button type="button" data-action="clear-cache" class="mobile-action-item">
                <i class="fas fa-broom"></i>
                <span>Clear Fields</span>
            </button>
        </div>
    </div>

    <div class="container">
        <div class="logo-circle">
            <svg width="38" height="38" viewBox="0 0 28 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M27.9766 0.193437L17.3616 11.8518L11.7609 6.4086H3.9584L13.6276 15.9528L13.3281 16.2817L13.3304 16.2842L3.90483 25.5879H11.7073L17.1227 20.3249L27.9225 31.8322C27.6855 31.94 27.4222 32 27.1448 32H1.88167C0.84245 32 0 31.1572 0 30.1176V1.88235C0 0.84276 0.842452 0 1.88167 0H27.1448C27.4434 0 27.7258 0.0695875 27.9766 0.193437Z" fill="white"/>
            </svg>
        </div>
        <h1 style="color: rgb(38, 168, 135);">Create S2S QR Payment Request</h1>
        <div class="subtitle" style="text-wrap: balanced;">
            This page demonstrates Server-to-Server (S2S) payment integration. Create QR payment requests from your backend and get the QR code that can be used to initiate payments. Features enhanced security with user IP tracking and device information. Perfect for applications where QR codes are generated server-side.
        </div>

        <div class="header-actions">
        </div>

        <form id="sessionForm" autocomplete="off">
            <div class="form-section">
                <div class="section-title"><i class="fas fa-credit-card"></i> Order Details</div>
                <div class="form-grid">
                    <div class="form-group tooltip">
                        <input type="text" id="amount" name="amount" placeholder="Amount" inputmode="decimal">
                        <span class="tooltiptext">
                            <strong>Payment Amount</strong><br>
                            <span class="tooltip-required">Required</span><br>
                            Enter the total amount to be charged (e.g., 1000.00)<br>
                            Must be a positive decimal number
                        </span>
                        <div class="helper-text">Enter the total Sale Amount <span class="required">*</span></div>
                    </div>
                    <div class="form-group tooltip">
                        <select id="currency" name="currency">
                            <option value="USD">USD</option>
                            <option value="CNH">CNH</option>
                            <option value="EUR">EUR</option>
                            <option value="CNY">CNY</option>
                            <option value="AED">AED</option>
                            <option value="JPY">JPY</option>
                            <option value="SGD">SGD</option>
                            <option value="GBP">GBP</option>
                          </select>
                        <span class="tooltiptext">
                            <strong>Currency Code</strong><br>
                            <span class="tooltip-required">Required</span><br>
                            ISO 4217 currency code (e.g.USD, EUR)<br>
                            Defaults to INR if not specified
                        </span>
                    </div>
                    <div class="form-group tooltip">
                        <input type="text" id="ReferenceID" name="reference_id" placeholder="Customer Reference Number" autocomplete="off">
                        <span class="tooltiptext">
                            <strong>Reference ID</strong><br>
                            <span class="tooltip-required">Required</span><br>
                            Unique identifier for this transaction<br>
                            Use alphanumeric characters, max 50 chars
                        </span>
                        <div class="helper-text">Merchant's Unique identifier for the order <span class="required">*</span></div>
                    </div>
                </div>
            </div>

            <div class="form-section">
                <div class="section-title"><i class="fas fa-user"></i> Buyer Details</div>
                <div class="form-grid">
                    <div class="form-group full-width tooltip">
                        <input type="text" id="buyerName" name="buyer_name" placeholder="Buyer Name">
                        <span class="tooltiptext">
                            <strong>Buyer Name</strong><br>
                            <span class="tooltip-required">Required</span><br>
                            Full legal name of the customer<br>
                            Used for payment processing and receipts
                        </span>
                        <div class="helper-text">Full name of the buyer <span class="required">*</span></div>
                    </div>
                    <div class="form-group tooltip">
                        <input type="email" id="buyerEmail" name="buyer_email" placeholder="Buyer Email">
                        <span class="tooltiptext">
                            <strong>Email Address</strong><br>
                            <span class="tooltip-required">Required</span><br>
                            Valid email address for payment receipts<br>
                            Format: user@example.com
                        </span>
                        <div class="helper-text">Buyer Email <span class="required">*</span></div>
                    </div>
                    <div class="form-group tooltip">
                        <span class="phone-prefix">+91</span>
                        <input type="tel" id="buyerPhone" name="buyer_phone" class="phone-input" placeholder="Buyer Phone">
                        <span class="tooltiptext">
                            <strong>Phone Number</strong><br>
                            <span class="tooltip-required">Required</span><br>
                            10-digit mobile number without country code<br>
                            Used for payment notifications and support
                        </span>
                        <div class="helper-text">Buyer Phone <span class="required">*</span></div>
                    </div>
                </div>
            </div>

            <div class="form-section">
                <div class="section-title"><i class="fas fa-box"></i> Product Details</div>
                <div class="form-grid">
                    <div class="form-group tooltip">
                        <input type="text" id="productName" name="product_name" placeholder="Product Name">
                        <span class="tooltiptext">
                            <strong>Product Name</strong><br>
                            <span class="tooltip-required">Required</span><br>
                            Name or title of the product/service<br>
                            Displayed on payment receipts
                        </span>
                        <div class="helper-text">Product Name<span class="required">*</span></div>
                    </div>
                </div>
            </div>

            <button type="submit" id="createButton" class="main-action-btn">
                <i class="fas fa-qrcode"></i>
                <span id="btnText">Generate QR Code</span>
            </button>
        </form>
    </div>

    <!-- Common utilities -->
    <!-- Trusted Types Policy (must load first) -->
    <script>loadJS("../assets/js/trusted-types-policy.js");</script>
    <script>loadJS("../assets/js/common-utils.js");</script>
    <!-- Pass Django variables to JavaScript -->
    <script>
        window.API_URL = window.Config.API_URL;
    </script>
    <!-- Page-specific logic -->
    <script>loadJS("../assets/js/qr_payment.js");</script>

    <!-- Credential injection handled centrally by common-utils.js -->
    
</body>
</html>
