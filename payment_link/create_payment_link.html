<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Create Payment Link</title>
    <link rel="stylesheet" href="../assets/css/inter-font.css">
    <link rel="stylesheet" href="../assets/css/fontawesome-all.min.css">
    <link rel="stylesheet" href="../assets/css/create_payment_link.css">
    <script src="../assets/js/config.js"></script>
</head>

<body>
    <!-- Modal for error/success -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal" id="modalBox">
            <button class="modal-close" id="modalCloseBtn" aria-label="Close">&times;</button>
            <div class="modal-icon" id="modalIcon"></div>
            <div class="modal-title" id="modalTitle"></div>
            <div class="modal-message" id="modalMessage"></div>
        </div>
    </div>

    <div class="right-actions">
        <div class="help-block">
            <div class="help-block-title">
                <i class="fas fa-bolt"></i>
                Quick Actions
            </div>
            <a href="../index.html" class="header-button">
                <i class="fas fa-home"></i>
                Back to Home
            </a>
            <a href="#" data-action="create-sample-data" class="header-button">
                <i class="fas fa-magic"></i>
                Set Sample Data
            </a>
            <a href="#" data-action="clear-cache" class="header-button">
                <i class="fas fa-broom"></i>
                Clear Fields
            </a>
        </div>
    </div>

    <!-- Mobile Quick Actions -->
    <div class="mobile-overlay" id="mobileOverlay"></div>
    <div class="mobile-quick-actions">
        <button class="mobile-fab" id="mobileFab">
            <i class="fas fa-bolt"></i>
        </button>
        <div class="mobile-actions-menu" id="mobileActionsMenu">
            <button type="button" data-action="navigate-home" class="mobile-action-item">
                <i class="fas fa-home"></i>
                <span>Back to Home</span>
            </button>
            <button type="button" data-action="create-sample-data" class="mobile-action-item">
                <i class="fas fa-magic"></i>
                <span>Set Sample Data</span>
            </button>
            <button type="button" data-action="clear-cache" class="mobile-action-item">
                <i class="fas fa-broom"></i>
                <span>Clear Fields</span>
            </button>
        </div>
    </div>

    <div class="container">
        <div class="logo-circle">
            <svg width="38" height="38" viewBox="0 0 28 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M27.9766 0.193437L17.3616 11.8518L11.7609 6.4086H3.9584L13.6276 15.9528L13.3281 16.2817L13.3304 16.2842L3.90483 25.5879H11.7073L17.1227 20.3249L27.9225 31.8322C27.6855 31.94 27.4222 32 27.1448 32H1.88167C0.84245 32 0 31.1572 0 30.1176V1.88235C0 0.84276 0.842452 0 1.88167 0H27.1448C27.4434 0 27.7258 0.0695875 27.9766 0.193437Z"
                    fill="white" />
            </svg>
        </div>
        <h1>Generate a Payment Link</h1>

        <div class="summary-card">
            <div class="summary-header">
                <span><i class="fas fa-receipt"></i> Payment Summary</span>
                <button type="button" class="summary-action" data-action="create-sample-data">
                    <i class="fas fa-magic"></i>
                    Quick Fill
                </button>
            </div>
            <div class="summary-amount" id="summaryAmount">₹0.00</div>
            <div class="summary-description" id="summaryDescription">
                Add a short description to help your customer understand what this payment link is for.
            </div>
        </div>

        <form id="linkForm" autocomplete="off">
            <div class="form-section">
                <div class="section-title">
                    <i class="fa-solid fa-credit-card"></i>
                    Payment Details
                </div>
                <div class="form-grid single-column">
                    <div class="form-group">
                        <label for="amount">Amount (INR)</label>
                        <div class="input-wrapper">
                            <span class="input-prefix">₹</span>
                            <input type="number" id="amount" name="amount" placeholder="0.00" min="1" step="0.01"
                                required inputmode="decimal">
                        </div>
                        <div class="helper-text">Enter the total payable amount in INR</div>
                    </div>
                </div>
            </div>

            <div class="form-section">
                <div class="section-title"><i class="fas fa-box"></i> Product Details</div>
                <div class="form-grid">
                    <div class="form-group">
                        <input type="text" id="productName" name="product_name" placeholder="Product Name">
                        <div class="helper-text">Product Name<span class="required">*</span></div>
                    </div>
                    <div class="form-group">
                        <select id="typeOfGoods" name="type_of_goods">
                            <option value="">Select Type of Goods</option>
                            <option value="goods">Goods</option>
                            <option value="service">Service</option>
                        </select>
                        <div class="helper-text">Type of Goods<span class="required">*</span></div>
                    </div>
                    <div class="form-group">
                        <input type="text" id="productDescription" name="product_description"
                            placeholder="Product Description">
                    </div>
                </div>
            </div>

            <div class="form-section">
                <div class="section-title">
                    <i class="fas fa-user"></i>
                    Buyer Details
                </div>
                <div class="form-grid single-column">
                    <div class="form-group">
                        <label for="buyerName">Buyer Name</label>
                        <input type="text" id="buyerName" name="buyer_name" placeholder="Full name">
                        <div class="helper-text">Full name of the buyer</div>
                    </div>

                    <div class="form-group">
                        <label for="buyerEmail">Buyer Email</label>
                        <input type="email" id="buyerEmail" name="buyer_email" placeholder="user@example.com">
                        <div class="helper-text">Email address for receipts and notifications</div>
                    </div>

                    <div class="form-group">
                        <label for="buyerPhone">Buyer Phone</label>
                        <div class="input-wrapper">
                            <span class="input-prefix">+91</span>
                            <input type="tel" id="buyerPhone" name="buyer_phone" class="phone-input"
                                placeholder="9876543210">
                        </div>
                        <div class="helper-text">10-digit phone number (without country code)</div>
                    </div>

                    <div class="form-group">
                        <label for="buyerAddressLine1">Address Line 1</label>
                        <input type="text" id="buyerAddressLine1" name="buyer_address_line_1"
                            placeholder="Street, building, apartment">
                        <div class="helper-text">Street address or building name</div>
                    </div>

                    <div class="form-group">
                        <label for="buyerAddressLine2">Address Line 2</label>
                        <input type="text" id="buyerAddressLine2" name="buyer_address_line_2"
                            placeholder="Suite, floor, landmark (optional)">
                        <div class="helper-text">Additional address information (optional)</div>
                    </div>

                    <div class="form-group">
                        <label for="buyerCity">City</label>
                        <input type="text" id="buyerCity" name="buyer_city" placeholder="City">
                        <div class="helper-text">City or town</div>
                    </div>

                    <div class="form-group">
                        <label for="buyerState">State</label>
                        <input type="text" id="buyerState" name="buyer_state" placeholder="State">
                        <div class="helper-text">State or province</div>
                    </div>

                    <div class="form-group">
                        <label for="buyerPostalCode">Postal Code</label>
                        <input type="text" id="buyerPostalCode" name="buyer_postal_code"
                            placeholder="Postal / PIN code">
                        <div class="helper-text">Postal or ZIP code</div>
                    </div>
                </div>
            </div>

            <div class="form-section">
                <div class="section-title">
                    <i class="fas fa-info-circle"></i>
                    Additional Info
                </div>
                <div class="form-grid single-column">
                    <div class="form-group">
                        <label for="invoiceNumber">Invoice Number</label>
                        <input type="text" id="invoiceNumber" name="invoice_number" placeholder="INV12345">
                        <div class="helper-text">Optional invoice or reference number for your records</div>
                    </div>

                    <div class="form-group">
                        <label for="expiryAt">Expiry (Date & Time)</label>
                        <input type="datetime-local" id="expiryAt" name="expiry_at">
                        <div class="helper-text">Set when the payment link should expire (optional)</div>
                    </div>
                </div>
            </div>

            <button type="submit" id="createButton" class="main-action-btn">
                <i class="fas fa-link"></i>
                <span id="btnText">Generate Payment Link</span>
            </button>
        </form>
    </div>

    <!-- Common utilities -->
    <!-- Trusted Types Policy (must load first) -->
    <script src="../assets/js/trusted-types-policy.js"></script>
    <script src="../assets/js/common-utils.js"></script>
    <!-- Pass Django variables to JavaScript -->
    <script>
        window.API_URL = window.Config.API_URL;
    </script>
    <!-- Page-specific logic -->
    <script src="../assets/js/create_payment_link.js"></script>

    <!-- Credential injection handled centrally by common-utils.js -->

</body>

</html>