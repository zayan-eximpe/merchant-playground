<!DOCTYPE html>
<html lang="en">

<head>
    <script src="../assets/js/config.js?v=1.0.1"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="icon" href="https://eximpe.com/EximPe.webp">
    <title>Refund Settlements - EximPe Integrations</title>
    <script>loadCSS("../assets/css/fontawesome-all.min.css");</script>
    <script>loadCSS("../assets/css/settlements_refund_settlements.css");</script>

</head>

<body>
    <div class="container">
        <div class="logo-circle">
            <svg width="38" height="38" viewBox="0 0 28 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M27.9766 0.193437L17.3616 11.8518L11.7609 6.4086H3.9584L13.6276 15.9528L13.3281 16.2817L13.3304 16.2842L3.90483 25.5879H11.7073L17.1227 20.3249L27.9225 31.8322C27.6855 31.94 27.4222 32 27.1448 32H1.88167C0.84245 32 0 31.1572 0 30.1176V1.88235C0 0.84276 0.842452 0 1.88167 0H27.1448C27.4434 0 27.7258 0.0695875 27.9766 0.193437Z"
                    fill="white" />
            </svg>
        </div>
        <h1>Refund Settlements</h1>
        <div class="subtitle">
            View refund settlement reports, track refund disbursements, and manage refund settlement schedules.
        </div>

        <div class="header-actions">
            <a href="../index.html" class="header-button">
                <i class="fas fa-home"></i>
                Back to Integrations
            </a>
        </div>

        <div class="form-section">
            <div class="section-title">
                <i class="fas fa-search"></i>
                Search Refund Settlements
            </div>
            <form id="refundSettlementForm">
                <div class="form-grid">
                    <div class="form-group full-width">
                        <input type="text" id="refundId" placeholder="Enter refund ID (e.g., RF6607303589)" required>
                        <div class="helper-text">Enter the Refund ID to fetch settlement details</div>
                    </div>
                </div>
                <button type="submit" class="main-action-btn">
                    <i class="fas fa-search"></i>
                    Search Refund Settlements
                </button>
            </form>
        </div>

        <div class="error-message" id="errorMessage"></div>
        <div class="loading" id="loading">
            <i class="fas fa-spinner fa-spin"></i>
            Searching refund settlements...
        </div>

        <div class="summary-cards" id="summaryCards" style="display: none;">
            <div class="summary-card">
                <div class="summary-card-title">Total Settlement Amount</div>
                <div class="summary-card-value" id="totalAmount">â‚¹0.00</div>
            </div>
            <div class="summary-card">
                <div class="summary-card-title">Total Settlements</div>
                <div class="summary-card-value" id="totalCount">0</div>
            </div>
            <div class="summary-card">
                <div class="summary-card-title">Completed</div>
                <div class="summary-card-value" id="completedCount">0</div>
            </div>
            <div class="summary-card">
                <div class="summary-card-title">Pending</div>
                <div class="summary-card-value" id="pendingCount">0</div>
            </div>
        </div>

        <div class="results-section" id="resultsSection">
            <div class="section-title">
                <i class="fas fa-undo-alt"></i>
                Refund Settlement Results
            </div>
            <div class="table-responsive">
                <table class="settlement-table">
                    <thead>
                        <tr>
                            <th>Settlement ID</th>
                            <th>Merchant ID</th>
                            <th>Settlement Amount</th>
                            <th>Order ID</th>
                            <th>Settlement Date</th>
                            <th>Status</th>
                            <th>Bank Reference</th>
                        </tr>
                    </thead>
                    <tbody id="refundSettlementsTable">
                        <!-- Results will be populated here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>


    <!-- Common utilities -->
    <!-- Trusted Types Policy (must load first) -->
    <script>loadJS("../assets/js/trusted-types-policy.js");</script>
    <script>loadJS("../assets/js/common-utils.js");</script>
    <!-- Pass Django variables to JavaScript -->
    <script>
        window.API_URL = window.Config.API_URL;
    </script>
    <!-- Page-specific logic -->
    <script>loadJS("../assets/js/refund_settlements.js");</script>

    <!-- Credential injection handled centrally by common-utils.js -->

</body>

</html>